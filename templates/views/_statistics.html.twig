<div
	id="statistics-view" class="view hidden">
	<!-- En-tête avec contrôles -->
	<div class="row g-4 mb-4">
		<div class="col-md-8">
			<h2 class="h3 fw-bold text-gray-800 dark:text-gray-100 mb-3">
				<i class="fas fa-chart-bar text-primary me-2"></i>Statistiques & Analyse
			</h2>
		</div>
		<div class="col-md-4">
			<div class="d-flex gap-2">
				<select id="time-filter" class="form-select bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-300">
					<option value="today">Aujourd'hui</option>
					<option value="week" selected>Cette semaine</option>
					<option value="month">Ce mois</option>
					<option value="custom">Personnalisé</option>
				</select>
				<button class="btn btn-primary" onclick="App.refreshStatistics()">
					<i class="fas fa-sync-alt"></i>
				</button>
			</div>
		</div>
	</div>

	<!-- Filtre personnalisé (masqué par défaut) -->
	<div id="custom-date-filter" class="row g-3 mb-4 hidden">
		<div class="col-md-5">
			<label class="form-label text-gray-600 dark:text-gray-400 small">Date de début</label>
			<input type="date" id="start-date" class="form-control bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600">
		</div>
		<div class="col-md-5">
			<label class="form-label text-gray-600 dark:text-gray-400 small">Date de fin</label>
			<input type="date" id="end-date" class="form-control bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600">
		</div>
		<div class="col-md-2 d-flex align-items-end">
			<button class="btn btn-success w-100" onclick="App.applyCustomDateFilter()">
				<i class="fas fa-check"></i>
				Appliquer
			</button>
		</div>
	</div>

	<!-- KPIs Principaux -->
	<div class="row g-4 mb-4">
		<div class="col-xl-3 col-lg-6">
			{% include 'components/_stat-card.html.twig' with {
                label: 'Total Appels',
                id: 'stat-total-calls',
                icon: 'fas fa-phone-volume',
                trend: '+8%',
                trend_bg: 'bg-info-subtle text-info'
            } %}
		</div>

		<div class="col-xl-3 col-lg-6">
			{% include 'components/_stat-card.html.twig' with {
                label: 'Durée Moyenne',
                id: 'stat-avg-duration',
                icon: 'fas fa-clock',
                icon_bg: 'bg-green-100 dark:bg-green-900',
                icon_color: 'text-green-600 dark:text-green-400',
                trend: '-12s',
                trend_dir: 'down'
            } %}
		</div>

		<div class="col-xl-3 col-lg-6">
			{% include 'components/_stat-card.html.twig' with {
                label: 'Taux de Conversion',
                id: 'stat-conversion',
                icon: 'fas fa-percentage',
                icon_bg: 'bg-purple-100 dark:bg-purple-900',
                icon_color: 'text-purple-600 dark:text-purple-400',
                trend: '+5%',
                trend_dir: 'arrow-trend-up',
                trend_bg: 'bg-warning-subtle text-warning'
            } %}
		</div>

		<div class="col-xl-3 col-lg-6">
			{% include 'components/_stat-card.html.twig' with {
                label: 'Score Qualité',
                id: 'stat-quality',
                icon: 'fas fa-trophy',
                icon_bg: 'bg-emerald-100 dark:bg-emerald-900',
                icon_color: 'text-emerald-600 dark:text-emerald-400',
                trend: 'Top',
                trend_dir: 'star'
            } %}
		</div>
	</div>

	<!-- Graphiques principaux -->
	<div
		class="row g-4 mb-4">
		<!-- Graphique des appels par jour -->
		<div class="col-xl-8">
			<div class="card bg-white dark:bg-gray-800 border-0 shadow-lg rounded-2xl">
				<div class="card-header bg-transparent border-gray-100 dark:border-gray-700 px-4 py-3">
					<h5 class="card-title mb-0 fw-bold text-gray-800 dark:text-gray-100">
						<i class="fas fa-chart-line text-info me-2"></i>Évolution des Appels
					</h5>
				</div>
				<div class="card-body p-4">
					<canvas id="calls-chart" width="400" height="200"></canvas>
				</div>
			</div>
		</div>

		<!-- Répartition par statut -->
		<div class="col-xl-4">
			<div class="card bg-white dark:bg-gray-800 border-0 shadow-lg rounded-2xl">
				<div class="card-header bg-transparent border-gray-100 dark:border-gray-700 px-4 py-3">
					<h5 class="card-title mb-0 fw-bold text-gray-800 dark:text-gray-100">
						<i class="fas fa-chart-pie text-warning me-2"></i>Répartition des Appels
					</h5>
				</div>
				<div class="card-body p-4">
					<canvas id="status-chart" width="200" height="200"></canvas>
				</div>
			</div>
		</div>
	</div>

	<!-- Tableaux de détails selon le rôle -->
	<div
		id="role-specific-stats"><!-- Contenu dynamique selon le rôle -->
	</div>
</div>
